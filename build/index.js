(()=>{const{addFilter:e}=wp.hooks,{createHigherOrderComponent:t}=wp.compose,{Fragment:n}=wp.element,{InspectorControls:c,MediaUpload:o}=wp.blockEditor,{PanelBody:a,Button:l}=wp.components;e("blocks.registerBlockType","soundeffect/add-attributes",((e,t)=>"core/image"!==t?e:{...e,attributes:{...e.attributes,soundEffect:{type:"string",default:""},soundEffectName:{type:"string",default:""}}})),e("editor.BlockEdit","soundeffect/with-sound-effect",t((e=>t=>{if("core/image"!==t.name)return React.createElement(e,t);const{attributes:r,setAttributes:s}=t;return React.createElement(n,null,React.createElement(e,t),React.createElement(c,null,React.createElement(a,{title:"Soundeffekt Einstellungen"},React.createElement(o,{onSelect:e=>{console.log("Selected media:",e),s({soundEffect:e.url,soundEffectName:e.title||e.description||e.filename||document.querySelector(`[id="attachment-details-title-${e.id}"]`)?.value||"Unbenannt"})},allowedTypes:["audio"],value:r.soundEffect,render:({open:e})=>React.createElement("div",null,React.createElement(l,{onClick:e,isPrimary:!0},r.soundEffect?"Sound ändern":"Sound hinzufügen"),r.soundEffect&&React.createElement(React.Fragment,null,React.createElement(l,{onClick:()=>s({soundEffect:"",soundEffectName:""}),isSecondary:!0,style:{marginLeft:"8px"}},"Sound entfernen"),React.createElement("div",{style:{marginTop:"12px",marginBottom:"8px"}},React.createElement("strong",null,"Ausgewählter Sound:"),React.createElement("p",{style:{margin:"4px 0"}},r.soundEffectName||"Unbenannt")),React.createElement("div",null,React.createElement("audio",{controls:!0,style:{width:"100%"}},React.createElement("source",{src:r.soundEffect})))))}))))}),"withSoundEffect")),e("blocks.getSaveContent.extraProps","soundeffect/save-props",((e,t,n)=>("core/image"!==t.name||n.soundEffect&&(e["data-sound-effect"]=n.soundEffect),e))),e("blocks.getSaveElement","soundeffect/save-element",((e,t,n)=>"core/image"!==t.name?e:(console.log("Save Element:",e),console.log("Attributes:",n),n.soundEffect?wp.element.cloneElement(e,{...e.props,"data-sound-effect":n.soundEffect}):e))),wp.blocks.registerBlockType("core/image",{...wp.blocks.getBlockType("core/image"),attributes:{...wp.blocks.getBlockType("core/image").attributes,soundEffect:{type:"string",source:"attribute",selector:"img",attribute:"data-sound-effect"}}})})();